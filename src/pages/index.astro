---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import SectionHeader from "../components/SectionHeader.astro";
import ProjectCard from "../components/ProjectCard.astro";
import ContactForm from "../components/ContactForm.astro";
import AchievementCard from "../components/AchievementCard.astro";
import { getCollection } from "astro:content";
import { getGitHubStars } from "../utils/github";

const allProjects = await getCollection("projects");
const projects = await Promise.all(
  allProjects
    .sort((a, b) => a.data.order - b.data.order)
    .map(async (project) => {
      if (project.data.github) {
        const stars = await getGitHubStars(project.data.github);
        return {
          ...project,
          data: {
            ...project.data,
            stars: stars,
          },
        };
      }
      return project;
    })
);

const skills = ["HTML", "CSS", "JavaScript", "Python", "React", "Astro", "C"];

const achievements = [
  {
    title: "Portfolio Featured",
    description:
      "Listed across 10+ famous websites and repositories for minimalist design excellence.",
  },
  {
    title: "Best Design Award - IIT Roorkee",
    description:
      "Won Best Design Award after qualifying Round 1 among 100k+ participants across India. Selected in top 80 for the 3-day final competition.",
  },
  {
    title: "International Hackathon Winner",
    description:
      "Secured 4th position globally with project 'CyberQuest Jr', winning $100 in awards.",
  },
];
---

<Layout>
  <Header />

  <main>
    <section id="about" class="section fade-in">
      <div class="container">
        <SectionHeader title="about" number="01" />
        <div class="text">
          <p>
            I have a keen interest in game development, web applications, and
            automation scripts. In my free time, I enjoy working on personal
            projects, contributing to open-source, and exploring new programming
            languages. I'm always looking for new challenges and opportunities
            to collaborate with other developers. If you're interested in
            working together or just want to chat about tech, feel free to reach
            out.
          </p>
        </div>
      </div>
    </section>

    <section id="achievements" class="section fade-in">
      <div class="container">
        <SectionHeader title="achievements" number="02" />
        <div class="achievements-grid">
          {
            achievements.map((achievement, index) => (
              <AchievementCard
                title={achievement.title}
                description={achievement.description}
                index={index}
              />
            ))
          }
        </div>
      </div>
    </section>

    <section id="projects" class="section fade-in">
      <div class="container">
        <SectionHeader title="projects" number="03" />
        <div class="projects-grid">
          {
            projects.map((project, index) => (
              <ProjectCard
                title={project.data.title}
                description={project.data.description}
                tech={project.data.tech}
                github={project.data.github}
                live={project.data.live}
                stars={project.data.stars}
                index={index}
              />
            ))
          }
        </div>
      </div>
    </section>

    <section id="skills" class="section fade-in">
      <div class="container">
        <SectionHeader title="skills" number="04" />
        <div class="skills-list">
          {skills.map((skill) => <span class="skill-tag">{skill}</span>)}
        </div>
      </div>
    </section>

    <section id="setup" class="section fade-in">
      <div class="container">
        <SectionHeader title="tools & setup" number="05" />
        <div class="misc-grid">
          <div class="misc-item slide-up stagger-1">
            <span class="misc-number">01</span>
            <h3>AI Assistance</h3>
            <div class="misc-content">
              <span class="highlight">gemini 3.0 pro</span> for frontend help.<br
              />
              <span class="highlight">chatgpt 5.1 codex</span> for project structure.<br
              />
              <span class="highlight">claude opus 4.5</span> for backend.
            </div>
          </div>

          <div class="misc-item slide-up stagger-2">
            <span class="misc-number">02</span>
            <h3>Current Device</h3>
            <div class="misc-content">
              <span class="highlight">intel i3 11th gen</span> @4.1ghz<br />
              <span class="highlight">8gb ddr4</span> @2666mhz<br />
              <span class="highlight">intel uhd</span> graphics<br />
              <span class="highlight">i use arch btw.</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="contact" class="section fade-in">
      <div class="container">
        <SectionHeader title="get in touch" number="06" />
        <ContactForm />
      </div>
    </section>
  </main>
</Layout>

<style>
  .section {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
    padding: var(--section-padding);
  }

  .text p {
    font-size: clamp(24px, 5vw, 52px);
    line-height: 1.2;
    margin: 0 0 0 50px;
    color: var(--secondary-text);
  }

  .projects-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 40px;
  }

  .skills-list {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 20px;
  }

  .skill-tag {
    font-size: 16px;
    font-weight: 400;
    color: var(--secondary-text);
    position: relative;
    padding-right: 15px;
    transition: var(--transition-smooth);
  }

  .skill-tag:not(:last-child)::after {
    content: "/";
    position: absolute;
    right: 0;
    color: var(--tertiary-text);
    opacity: 0.5;
  }

  .skill-tag:hover {
    color: var(--primary-text);
    transform: translateY(-2px);
  }

  .achievements-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 40px;
  }

  .misc-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 60px;
  }

  .misc-item {
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: 0;
    padding: 40px 30px;
    transition: var(--transition-bounce);
    position: relative;
  }

  .misc-item:hover {
    transform: translateY(-10px);
    background: var(--hover-bg);
    border-color: var(--primary-text);
  }

  .misc-number {
    font-size: 11px;
    font-weight: 300;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--secondary-text);
    margin-bottom: 20px;
    display: block;
  }

  .misc-item h3 {
    font-size: clamp(18px, 2.5vw, 22px);
    font-weight: 300;
    margin-bottom: 16px;
    color: var(--primary-text);
    line-height: 1.3;
  }

  .misc-content {
    color: var(--secondary-text);
    line-height: 1.6;
    font-size: 15px;
    font-weight: 300;
  }

  .highlight {
    color: var(--primary-text);
    font-weight: 400;
  }

  @media (max-width: 768px) {
    .text p {
      margin: 0;
      font-size: 20px;
    }

    .skills-grid,
    .misc-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
